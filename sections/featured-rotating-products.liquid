document.addEventListener("DOMContentLoaded", () => {
    const slider = document.querySelector("#product-slider");
    const productItems = document.querySelectorAll(".product-item");
    const prevBtn = document.querySelector("#prev-btn");
    const nextBtn = document.querySelector("#next-btn");
    const indicators = document.querySelectorAll(".indicator");
    let currentIndex = 0;
    let autoSlideInterval;

    const showProduct = (index) => {
        productItems.forEach((item, i) => {
            item.classList.toggle("active", i === index);
        });

        indicators.forEach((indicator, i) => {
            indicator.classList.toggle("active", i === index);
        });

        prevBtn.disabled = false;
        nextBtn.disabled = false;
    };

    const nextProduct = () => {
        currentIndex = (currentIndex + 1) % productItems.length;
        showProduct(currentIndex);
    };

    const prevProduct = () => {
        currentIndex = (currentIndex - 1 + productItems.length) % productItems.length;
        showProduct(currentIndex);
    };

    const startAutoSlide = () => {
        autoSlideInterval = setInterval(nextProduct, 5000);
    };

    const stopAutoSlide = () => {
        clearInterval(autoSlideInterval);
    };

    nextBtn.addEventListener("click", () => {
        stopAutoSlide();
        nextProduct();
        startAutoSlide();
    });

    prevBtn.addEventListener("click", () => {
        stopAutoSlide();
        prevProduct();
        startAutoSlide();
    });

    indicators.forEach((indicator, index) => {
        indicator.addEventListener("click", () => {
            stopAutoSlide();
            currentIndex = index;
            showProduct(currentIndex);
            startAutoSlide();
        });
    });

    slider.addEventListener("mouseenter", stopAutoSlide);
    slider.addEventListener("mouseleave", startAutoSlide);

    startAutoSlide();
});