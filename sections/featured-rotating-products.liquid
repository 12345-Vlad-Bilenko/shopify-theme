  <div id="product-slider" style="position: relative; text-align: center; width: 33%; margin: 0 auto;">

    <!-- Лог для перевірки кількості продуктів -->
    <p>Number of products: {{ collections.all.products.size }}</p>

    <div id="slider-container" style="display: flex; overflow: hidden; justify-content: center; width: 100%; margin: 0 auto; position: relative;">
      <!-- Виведення одного активного товару -->
      <div id="slider-item" class="product-item" style="display: flex; transition: transform 0.5s;">
        {% for product in collections.all.products %}
          <div class="product {% if forloop.index0 == 0 %}active{% endif %}" 
               style="flex-shrink: 0; width: 200px; padding: 10px; text-align: center; transition: transform 0.5s; opacity: 1; margin: 0 10px; cursor: pointer;">
            <!-- Зображення продукту -->
            <img src="{{ product.featured_image | img_url: 'medium' }}" alt="{{ product.title }}" style="max-width: 100%; height: auto; transition: transform 0.5s; border-radius: 5px;">
            <!-- Назва продукту -->
            <p>{{ product.title }}</p>
            <!-- Ціна продукту -->
            <p>{{ product.price | money }}</p>
            <!-- Кнопка для відкриття товару -->
            <a href="{{ product.url }}" class="btn btn-primary">View Product</a>
          </div>
        {% endfor %}
      </div>
    </div>

  </div>

<script>
  const products = {{ collections.all.products | json }};
  let currentIndex = 0;
  const totalProducts = products.length;
  const sliderContainer = document.getElementById('slider-item');
  const productItems = document.querySelectorAll('.product');

  // Оновлення вигляду продуктів
  function updateUI() {
    // Оновлюємо положення слайдера
    sliderContainer.style.transform = `translateX(-${currentIndex * 220}px)`;

    // Оновлення вигляду продуктів
    productItems.forEach((item, index) => {
      if (index === currentIndex) {
        item.classList.add('active'); // Додаємо клас active для активного продукту
        item.style.transform = 'scale(1)'; // Активний продукт - більший
        item.style.opacity = '1'; // Чіткий
        item.querySelector('img').style.transform = 'scale(1.2)'; // Зображення активного продукту буде більшим
        item.style.margin = '0 0'; // Відсутність відступів для активного товару
      } else {
        item.classList.remove('active'); // Видаляємо клас active для неактивних товарів
        item.style.transform = 'scale(0.8)'; // Неактивний продукт - менший
        item.style.opacity = '0.5'; // Полупрозорий
        item.querySelector('img').style.transform = 'scale(0.8)'; // Зображення неактивного продукту буде меншим
        item.style.margin = '0 10px'; // Відступи для неактивних товарів
      }
    });
  }

  // Перехід до наступного продукту
  function nextProduct() {
    if (currentIndex < totalProducts - 1) {
      currentIndex++;
      updateUI();
    }
  }

  // Перехід до попереднього продукту
  function prevProduct() {
    if (currentIndex > 0) {
      currentIndex--;
      updateUI();
    }
  }

  // Перехід на продукт по кліку
  productItems.forEach((item, index) => {
    item.addEventListener('click', () => {
      currentIndex = index;
      updateUI();
    });
  });

  // Автоперехід кожні 15 секунд
  setInterval(nextProduct, 15000);

  // Оновлення інтерфейсу при завантаженні сторінки
  updateUI();
</script>

<style>
  .product {
    transition: transform 0.5s ease, opacity 0.5s ease, margin 0.5s ease;
  }

  .product.active {
    transform: scale(1) !important;  /* Активний товар - більший */
    opacity: 1 !important;  /* Чіткий */
    margin: 0 0 !important;  /* Без відступів для активного товару */
  }

  .product img {
    transition: transform 0.5s ease;
  }

  .product.active img {
    transform: scale(1.2);  /* Зображення активного продукту буде більшим */
  }

  /* Стилі для самого слайдера */
  #product-slider {
    width: 33%; /* Ширина слайдера 33% від ширини екрану */
    margin: 0 auto; /* Центрування по горизонталі */
  }

  #slider-item {
    display: flex;
    overflow: hidden;
    justify-content: center;
    width: 100%;
  }

  .product {
    cursor: pointer;
  }
</style>
